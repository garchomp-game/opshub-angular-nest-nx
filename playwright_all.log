
Running 37 tests using 1 worker

  ✓   1 [api-smoke] › e2e/api.smoke.spec.ts:18:5 › GET /api/health が正常応答を返すこと (30ms)
  ✓   2 [api-smoke] › e2e/api.smoke.spec.ts:29:5 › POST /api/auth/login で JWT が取得できること (57ms)
  ✓   3 [api-smoke] › e2e/api.smoke.spec.ts:40:5 › 認証なしで /api/workflows にアクセスすると 401 になること (10ms)
  ✓   4 [api-smoke] › e2e/api.smoke.spec.ts:45:5 › JWT 付きで /api/workflows にアクセスできること (67ms)
  ✓   5 [api-smoke] › e2e/api.smoke.spec.ts:73:9 › GET workflows が 200 を返すこと (64ms)
  ✓   6 [api-smoke] › e2e/api.smoke.spec.ts:73:9 › GET projects が 200 を返すこと (62ms)
  ✓   7 [api-smoke] › e2e/api.smoke.spec.ts:73:9 › GET timesheets が 200 を返すこと (60ms)
  ✓   8 [api-smoke] › e2e/api.smoke.spec.ts:73:9 › GET expenses が 200 を返すこと (60ms)
  ✓   9 [api-smoke] › e2e/api.smoke.spec.ts:73:9 › GET notifications が 200 を返すこと (61ms)
  ✓  10 [api-smoke] › e2e/api.smoke.spec.ts:73:9 › GET invoices が 200 を返すこと (69ms)
  ✓  11 [api-smoke] › e2e/api.smoke.spec.ts:73:9 › GET dashboard が 200 を返すこと (65ms)
  ✓  12 [api-smoke] › e2e/api.smoke.spec.ts:73:9 › GET search が 200 を返すこと (62ms)
  ✓  13 [api-smoke] › e2e/api.smoke.spec.ts:73:9 › GET admin/users が 200 を返すこと (60ms)
  ✓  14 [api-smoke] › e2e/api.smoke.spec.ts:73:9 › GET admin/audit-logs が 200 を返すこと (59ms)
  ✓  15 [api-smoke] › e2e/api.smoke.spec.ts:86:5 › ワークフロー CRUD が一通り動作すること (87ms)
  ✓  16 [api-smoke] › e2e/api.smoke.spec.ts:131:5 › リフレッシュトークンで新しいアクセストークンが取得できること (60ms)
  ✓  17 [api-smoke] › e2e/api.smoke.spec.ts:161:5 › ワークフロー draft → submit → approve のフルサイクルが動作すること (190ms)
  ✓  18 [api-smoke] › e2e/api.smoke.spec.ts:208:5 › 他人のワークフローを更新しようとすると 403 になること (186ms)
  ✓  19 [api-smoke] › e2e/api.smoke.spec.ts:244:5 › member ロールで /invoices にアクセスすると 403 になること (60ms)
  ✓  20 [api-smoke] › e2e/api.smoke.spec.ts:252:5 › member ロールで /admin/users にアクセスすると 403 になること (55ms)
  ✓  21 [api-smoke] › e2e/api.smoke.spec.ts:262:5 › 必須フィールド未入力で POST /workflows すると 400 になること (58ms)
  ✓  22 [api-smoke] › e2e/api.smoke.spec.ts:280:5 › 経費を作成し一覧で取得できること (92ms)
  ✓  23 [api-smoke] › e2e/api.smoke.spec.ts:323:5 › ワークフロー submit → reject が動作すること (176ms)
  ✓  24 [api-smoke] › e2e/api.smoke.spec.ts:365:5 › 存在しない API エンドポイントが 404 を返すこと (53ms)
  ✓  25 [ui-smoke] › e2e/ui.smoke.spec.ts:27:9 › ログイン › メールとパスワードでログインできること (678ms)
  ✓  26 [ui-smoke] › e2e/ui.smoke.spec.ts:34:9 › ログイン › 不正な資格情報ではログインできないこと (326ms)
  ✓  27 [ui-smoke] › e2e/ui.smoke.spec.ts:47:9 › セッション永続化 › ページリロード後もログイン状態が維持されること (1.2s)
  ✓  28 [ui-smoke] › e2e/ui.smoke.spec.ts:74:13 › ナビゲーション › ダッシュボードページに遷移できること (521ms)
  ✓  29 [ui-smoke] › e2e/ui.smoke.spec.ts:74:13 › ナビゲーション › プロジェクトページに遷移できること (625ms)
  ✓  30 [ui-smoke] › e2e/ui.smoke.spec.ts:74:13 › ナビゲーション › ワークフローページに遷移できること (602ms)
  ✓  31 [ui-smoke] › e2e/ui.smoke.spec.ts:74:13 › ナビゲーション › 経費ページに遷移できること (680ms)
  ✓  32 [ui-smoke] › e2e/ui.smoke.spec.ts:74:13 › ナビゲーション › 工数ページに遷移できること (584ms)
  ✓  33 [ui-smoke] › e2e/ui.smoke.spec.ts:92:9 › 認証ガード › 未認証でダッシュボードにアクセスするとログインにリダイレクトされること (298ms)
  ✓  34 [ui-smoke] › e2e/ui.smoke.spec.ts:107:9 › 各ページでのセッション永続化 › /workflows ページでリロードしてもログイン状態が維持されること (2.0s)
  ✓  35 [ui-smoke] › e2e/ui.smoke.spec.ts:123:9 › 各ページでのセッション永続化 › /expenses ページでリロードしてもログイン状態が維持されること (1.9s)
  ✓  36 [ui-smoke] › e2e/ui.smoke.spec.ts:139:9 › ログアウト → 再ログイン › ログアウト後に /login にリダイレクトされ、再ログインできること (822ms)
  ✓  37 [ui-smoke] › e2e/ui.smoke.spec.ts:175:9 › 404 ページ › 存在しない URL にアクセスすると 404 ページが表示されること (1.2s)

  37 passed (15.7s)
